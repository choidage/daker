const translations = {
  ko: {
    header_title: '팀 인텔리전스 대시보드',
    tab_overview: '개요',
    tab_gates: 'Gate 분석',
    tab_onboarding: '온보딩',
    tab_feedback: '피드백 루프',
    tab_search: 'RAG 검색',
    tab_pipeline: '파이프라인',
    tab_collab: '협업',
    tab_meta: '의도 메타',
    meta_title: 'Hidden Intent Files',
    meta_desc: '코드의 의도와 설계 결정을 .meta.json으로 관리합니다.',
    meta_analyze: '자동 분석',
    meta_batch: '일괄 분석',
    meta_index: 'DB 인덱싱',
    meta_purpose: '목적',
    meta_decisions: '설계 결정',
    meta_deps: '의존성',
    meta_constraints: '제약',
    meta_count: '메타 파일 수',
    meta_no_data: '메타 파일 없음 — 자동 분석으로 생성하세요.',
    meta_coverage: '커버리지',
    meta_covered: '보유',
    meta_uncovered: '미보유',
    meta_uncovered_files: '메타 미보유 파일',
    meta_search_ph: '목적, 결정, 의존성 검색...',
    meta_single_ph: '파일 경로를 입력하여 단일 분석',
    meta_single_btn: '분석',
    meta_edit: '수정',
    meta_save: '저장',
    meta_cancel: '취소',
    meta_delete: '삭제',
    meta_delete_confirm: '이 메타 파일을 삭제하시겠습니까?',
    meta_alternatives: '고려한 대안',
    meta_dep_graph: '의존성 그래프',
    meta_dep_nodes: '노드',
    meta_dep_edges: '연결',
    meta_dep_from: '소스',
    meta_dep_to: '의존 대상',
    meta_dep_module: '모듈 경로',
    meta_tab_list: '메타 목록',
    meta_tab_coverage: '커버리지',
    meta_tab_graph: '의존성 그래프',
    health_score: '프로젝트 건강 점수',
    gate_pass_rate: 'Gate 통과율',
    ai_cost_today: 'AI 비용 (오늘)',
    files_indexed: '인덱싱된 파일',
    weekly_trend: '주간 추이 - Gate 실행',
    recent_gates: '최근 Gate 결과',
    gate_distribution: 'Gate 상태 분포',
    cost_trend: '주간 비용 추이',
    team_activity: '팀 활동 현황',
    pipeline_status: '6-Gate 파이프라인 상태',
    arch_layers: '아키텍처 레이어 - 실시간 상태',
    onboarding_guide: '프로젝트 온보딩 가이드',
    adr_timeline: 'ADR 타임라인',
    failure_analysis: '실패 패턴 분석',
    suggestions: '개선 제안',
    loading: '로딩 중...',
    connecting: '연결 중...',
    live: '실시간',
    reconnecting: '재연결 중...',
    today: '오늘',
    total: '누적',
    runs: '회 실행',
    searches: '검색',
    no_team: '아직 팀 활동이 없습니다',
    no_adr: 'ADR이 아직 없습니다',
    no_data: '데이터 없음',
    no_suggestions: '제안 없음 - 시스템 양호',
    passed: '통과',
    failed: '실패',
    warning: '경고',
    cost_label: '비용 ($)',
    getting_started: '시작하기',
    cli_commands: 'CLI 명령어',
    no_fail_pattern: '현재 패턴: 반복 실패 감지 없음 - 양호',
    fb_reasons: '실패 상세 원인',
    fb_no_failures: '실패 이력이 없습니다 - 양호한 상태입니다',
    fb_times: '회',
    ob_modules: '모듈 현황',
    ob_quickstart: '빠른 시작 가이드',
    ob_project_desc: 'VIBE-X는 AI 바이브 코딩의 품질을 체계적으로 보장하는 5-Layer 통합 협업 플랫폼입니다.',
    pipeline_runner_title: '6-Gate 파이프라인 실행',
    pipeline_placeholder: '파일 경로 (예: src/layer2_rag/vector_db.py)',
    pipeline_author_ph: '작업자',
    pipeline_run_btn: '파이프라인 실행',
    pipeline_running: '6-Gate 파이프라인 실행 중...',
    pipeline_overall_passed: '전체 파이프라인 통과',
    pipeline_overall_warning: '파이프라인 경고 발생',
    pipeline_overall_failed: '파이프라인 실패',
    gate_analysis_title: 'Gate 실행 이력',
    gate_history_empty: '파이프라인을 실행하면 결과가 여기에 표시됩니다',
    gate_stats_title: 'Gate 통계',
    wz_title: 'Work Zone - 팀 작업 현황',
    wz_author_ph: '작업자 이름',
    wz_files_ph: '파일1.py, 파일2.py',
    wz_desc_ph: '작업 설명 (선택)',
    wz_declare_btn: '영역 선언',
    wz_empty: '활성 작업 영역이 없습니다',
    wz_release: '해제',
    wz_conflict_warn: '충돌 감지!',
    de_title: '설계 결정 추출기',
    de_placeholder: '대화 로그 또는 미팅 노트를 붙여넣어 설계 결정을 추출합니다...',
    de_extract_btn: '결정 추출',
    de_auto_save: 'ADR로 자동 저장',
    de_no_decisions: '추출된 설계 결정이 없습니다',
    de_saved_adr: 'ADR로 저장됨',
    rag_search_title: '코드베이스 시맨틱 검색',
    rag_placeholder: '자연어로 코드 검색... (예: 인증 처리 함수)',
    rag_search_btn: '검색',
    rag_empty: '검색어를 입력하면 코드베이스에서 관련 코드를 찾습니다',
    rag_no_results: '검색 결과가 없습니다. 다른 키워드로 시도해보세요.',
    rag_chunks: '총 청크 수',
    rag_collection: '컬렉션',
    rag_status: 'DB 상태',
    rag_results_count: '개 결과',
    rag_searching: '검색 중...',
    rag_lines: '라인',
    rag_reindex: '재인덱싱',
    health_breakdown: '건강 점수 세부 항목',
    hb_gate_label: 'Gate 통과율',
    hb_arch_label: '아키텍처 일관성',
    hb_quality_label: '코드 품질',
    hb_activity_label: '활동 지수',
    tech_debt_title: '기술 부채',
    tech_debt_empty: '감지된 기술 부채 없음 - 양호',
    qa_title: '프로젝트 질의응답',
    qa_placeholder: '이 프로젝트에 대해 무엇이든 물어보세요...',
    qa_ask_btn: '질문',
    alert_dismiss_all: '모두 확인',
    login_title: '로그인',
    login_username: '사용자 이름',
    login_password: '비밀번호',
    login_btn: '로그인',
    login_error: '로그인 실패',
    logout_btn: '로그아웃',
    admin_title: '사용자 관리',
    admin_add_user: '사용자 추가',
    admin_role: '역할',
    admin_status: '상태',
    admin_actions: '관리',
    admin_active: '활성',
    admin_inactive: '비활성',
    admin_deactivate: '비활성화',
    admin_activate: '활성화',
    admin_delete: '삭제',
    admin_reset_pw: '비밀번호 초기화',
    admin_confirm_delete: '정말 삭제하시겠습니까?',
    admin_new_pw: '새 비밀번호',
    tab_admin: '관리',
    tab_projects: '프로젝트',
    profile: '프로필',
    projects_title: '멀티 프로젝트 관리',
    projects_aggregate: '전체 프로젝트 현황',
    projects_total: '총 프로젝트',
    projects_members: '총 팀원',
    projects_add: '프로젝트 추가',
    projects_empty: '등록된 프로젝트가 없습니다',
    projects_switch: '전환',
    projects_id: '프로젝트 ID',
    projects_name: '프로젝트 이름',
    projects_path: '루트 경로',
    projects_desc: '설명',
    projects_team: '팀원 (쉼표 구분)',
    projects_tags: '태그 (쉼표 구분)',
    projects_register: '등록',
    projects_health: '건강 점수',
    projects_gates: 'Gate 실행',
    projects_alerts: '경고',
    members_title: '프로젝트 멤버',
    members_add: '멤버 추가',
    members_remove: '제거',
    members_role: '프로젝트 역할',
    members_change_role: '역할 변경',
    members_owner: '소유자',
    members_maintainer: '관리자',
    members_developer: '개발자',
    members_viewer: '뷰어',
    members_username: '사용자명',
    members_joined: '참여일',
    members_empty: '멤버가 없습니다',
    members_transfer: '소유권 이전',
    members_no_permission: '권한이 없습니다',
    members_confirm_remove: '정말 제거하시겠습니까?',
  },
  en: {
    header_title: 'Team Intelligence Dashboard',
    tab_overview: 'Overview',
    tab_gates: 'Gate Analysis',
    tab_onboarding: 'Onboarding',
    tab_feedback: 'Feedback Loop',
    tab_search: 'RAG Search',
    tab_pipeline: 'Pipeline',
    tab_collab: 'Collaboration',
    tab_meta: 'Intent Meta',
    meta_title: 'Hidden Intent Files',
    meta_desc: 'Manage code intent and design decisions as .meta.json files.',
    meta_analyze: 'Auto Analyze',
    meta_batch: 'Batch Analyze',
    meta_index: 'Index to DB',
    meta_purpose: 'Purpose',
    meta_decisions: 'Decisions',
    meta_deps: 'Dependencies',
    meta_constraints: 'Constraints',
    meta_count: 'Meta Files',
    meta_no_data: 'No meta files — use auto analysis to generate.',
    meta_coverage: 'Coverage',
    meta_covered: 'Covered',
    meta_uncovered: 'Uncovered',
    meta_uncovered_files: 'Uncovered Files',
    meta_search_ph: 'Search purpose, decisions, deps...',
    meta_single_ph: 'Enter file path to analyze',
    meta_single_btn: 'Analyze',
    meta_edit: 'Edit',
    meta_save: 'Save',
    meta_cancel: 'Cancel',
    meta_delete: 'Delete',
    meta_delete_confirm: 'Delete this meta file?',
    meta_alternatives: 'Alternatives Considered',
    meta_dep_graph: 'Dependency Graph',
    meta_dep_nodes: 'Nodes',
    meta_dep_edges: 'Edges',
    meta_dep_from: 'Source',
    meta_dep_to: 'Target',
    meta_dep_module: 'Module Path',
    meta_tab_list: 'Meta List',
    meta_tab_coverage: 'Coverage',
    meta_tab_graph: 'Dependency Graph',
    health_score: 'Health Score',
    gate_pass_rate: 'Gate Pass Rate',
    ai_cost_today: 'AI Cost (Today)',
    files_indexed: 'Files Indexed',
    weekly_trend: 'Weekly Trend - Gate Runs',
    recent_gates: 'Recent Gate Results',
    gate_distribution: 'Gate Status Distribution',
    cost_trend: 'Weekly Cost Trend',
    team_activity: 'Team Activity',
    pipeline_status: '6-Gate Pipeline Status',
    arch_layers: 'Architecture Layers - Live Status',
    onboarding_guide: 'Project Onboarding Guide',
    adr_timeline: 'ADR Timeline',
    failure_analysis: 'Failure Pattern Analysis',
    suggestions: 'Improvement Suggestions',
    loading: 'Loading...',
    connecting: 'Connecting...',
    live: 'Live',
    reconnecting: 'Reconnecting...',
    today: 'Today',
    total: 'Total',
    runs: 'runs',
    searches: 'searches',
    no_team: 'No team activity yet',
    no_adr: 'No ADRs yet',
    no_data: 'No data',
    no_suggestions: 'No suggestions - system healthy',
    passed: 'Passed',
    failed: 'Failed',
    warning: 'Warning',
    cost_label: 'Cost ($)',
    getting_started: 'Getting Started',
    cli_commands: 'CLI Commands',
    no_fail_pattern: 'No repeated failure patterns detected - healthy',
    fb_reasons: 'Failure Details',
    fb_no_failures: 'No failures recorded - healthy state',
    fb_times: 'times',
    ob_modules: 'Module Status',
    ob_quickstart: 'Quick Start Guide',
    ob_project_desc: 'VIBE-X is an integrated 5-Layer collaboration platform that systematically ensures AI vibe coding quality.',
    pipeline_runner_title: '6-Gate Pipeline Runner',
    pipeline_placeholder: 'File path (e.g., src/layer2_rag/vector_db.py)',
    pipeline_author_ph: 'Author',
    pipeline_run_btn: 'Run Pipeline',
    pipeline_running: 'Running 6-Gate pipeline...',
    pipeline_overall_passed: 'Pipeline Passed',
    pipeline_overall_warning: 'Pipeline Warnings',
    pipeline_overall_failed: 'Pipeline Failed',
    gate_analysis_title: 'Gate Execution History',
    gate_history_empty: 'Run a pipeline to see results here',
    gate_stats_title: 'Gate Statistics',
    wz_title: 'Work Zone - Team Activity',
    wz_author_ph: 'Author name',
    wz_files_ph: 'file1.py, file2.py',
    wz_desc_ph: 'Description (optional)',
    wz_declare_btn: 'Declare Zone',
    wz_empty: 'No active work zones',
    wz_release: 'Release',
    wz_conflict_warn: 'Conflict detected!',
    de_title: 'Decision Extractor',
    de_placeholder: 'Paste conversation logs or meeting notes to extract design decisions...',
    de_extract_btn: 'Extract Decisions',
    de_auto_save: 'Auto-save as ADR',
    de_no_decisions: 'No design decisions extracted',
    de_saved_adr: 'Saved as ADR',
    rag_search_title: 'Codebase Semantic Search',
    rag_placeholder: 'Search code in natural language...',
    rag_search_btn: 'Search',
    rag_empty: 'Enter a query to search the codebase',
    rag_no_results: 'No results found. Try different keywords.',
    rag_chunks: 'Total Chunks',
    rag_collection: 'Collection',
    rag_status: 'DB Status',
    rag_results_count: 'results',
    rag_searching: 'Searching...',
    rag_lines: 'lines',
    rag_reindex: 'Re-index',
    health_breakdown: 'Health Score Breakdown',
    hb_gate_label: 'Gate Pass Rate',
    hb_arch_label: 'Architecture',
    hb_quality_label: 'Code Quality',
    hb_activity_label: 'Activity Index',
    tech_debt_title: 'Tech Debt',
    tech_debt_empty: 'No tech debt detected - healthy',
    qa_title: 'Ask About This Project',
    qa_placeholder: 'Ask anything about this project...',
    qa_ask_btn: 'Ask',
    alert_dismiss_all: 'Dismiss All',
    login_title: 'Login',
    login_username: 'Username',
    login_password: 'Password',
    login_btn: 'Sign In',
    login_error: 'Login failed',
    logout_btn: 'Logout',
    admin_title: 'User Management',
    admin_add_user: 'Add User',
    admin_role: 'Role',
    admin_status: 'Status',
    admin_actions: 'Actions',
    admin_active: 'Active',
    admin_inactive: 'Inactive',
    admin_deactivate: 'Deactivate',
    admin_activate: 'Activate',
    admin_delete: 'Delete',
    admin_reset_pw: 'Reset Password',
    admin_confirm_delete: 'Are you sure you want to delete?',
    admin_new_pw: 'New Password',
    tab_admin: 'Admin',
    tab_projects: 'Projects',
    profile: 'Profile',
    projects_title: 'Multi-Project Management',
    projects_aggregate: 'Cross-Project Overview',
    projects_total: 'Total Projects',
    projects_members: 'Total Members',
    projects_add: 'Add Project',
    projects_empty: 'No projects registered',
    projects_switch: 'Switch',
    projects_id: 'Project ID',
    projects_name: 'Project Name',
    projects_path: 'Root Path',
    projects_desc: 'Description',
    projects_team: 'Team (comma-separated)',
    projects_tags: 'Tags (comma-separated)',
    projects_register: 'Register',
    projects_health: 'Health Score',
    projects_gates: 'Gate Runs',
    projects_alerts: 'Alerts',
    members_title: 'Project Members',
    members_add: 'Add Member',
    members_remove: 'Remove',
    members_role: 'Project Role',
    members_change_role: 'Change Role',
    members_owner: 'Owner',
    members_maintainer: 'Maintainer',
    members_developer: 'Developer',
    members_viewer: 'Viewer',
    members_username: 'Username',
    members_joined: 'Joined',
    members_empty: 'No members',
    members_transfer: 'Transfer Ownership',
    members_no_permission: 'No permission',
    members_confirm_remove: 'Are you sure you want to remove?',
  },
} as const;

type Lang = keyof typeof translations;
type TranslationKey = keyof typeof translations.ko;

let currentLang: Lang = 'ko';

export function setLang(lang: Lang): void {
  currentLang = lang;
  if (typeof window !== 'undefined') {
    localStorage.setItem('vibe-x-lang', lang);
  }
}

export function getLang(): Lang {
  if (typeof window !== 'undefined') {
    const stored = localStorage.getItem('vibe-x-lang');
    if (stored === 'ko' || stored === 'en') {
      currentLang = stored;
    }
  }
  return currentLang;
}

export function t(key: TranslationKey): string {
  return translations[currentLang][key] ?? key;
}

export function toggleLang(): Lang {
  const next = currentLang === 'ko' ? 'en' : 'ko';
  setLang(next);
  return next;
}
