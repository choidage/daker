# VIBE-X 대시보드 사용법

> VIBE-X Team Intelligence Dashboard의 상단 탭 10개에 대한 역할, 사용법, 표시 항목을 정리한 문서입니다.
> 
> **접속**: `http://localhost:3000` (기본 계정: `admin` / `admin1234`)

---

## 탭 구성 개요

| # | 탭 이름 | 경로 | 아이콘 | 권한 | 핵심 역할 |
|---|---------|------|--------|------|-----------|
| 1 | 개요 | `/` | LayoutDashboard | 전체 | 프로젝트 건강 상태 한눈에 파악 |
| 2 | Gate 분석 | `/gates` | Shield | 전체 | Gate별 통과율 분석 + 이력 조회 |
| 3 | 파이프라인 | `/pipeline` | Play | 전체 | 6-Gate 파이프라인 직접 실행 |
| 4 | RAG 검색 | `/search` | Search | 전체 | 코드베이스 시맨틱 검색 |
| 5 | 온보딩 | `/onboarding` | GraduationCap | 전체 | 프로젝트 Q&A + 아키텍처 브리핑 |
| 6 | 피드백 루프 | `/feedback` | RefreshCw | 전체 | Gate 실패 패턴 분석 + 개선 제안 |
| 7 | 협업 | `/collab` | Users | 전체 | 작업 영역 선언 + 설계 결정 추출 |
| 8 | 의도 메타 | `/meta` | FileCode2 | 전체 | .meta.json 관리 + Vector DB 인덱싱 |
| 9 | 프로젝트 | `/projects` | FolderKanban | Admin/Lead | 멀티 프로젝트 + 팀원 권한 관리 |
| 10 | 관리자 | `/admin` | Settings | Admin/Lead | 사용자 계정 + 역할 관리 |

> 탭 9, 10은 **Admin** 또는 **Lead** 역할로 로그인한 경우에만 표시됩니다.

---

## 1. 개요 (Overview)

**경로**: `/`  
**역할**: 프로젝트의 전체 상태를 한눈에 파악하는 메인 대시보드

### 표시 항목

#### 상단 카드 (4개)
| 카드 | 설명 |
|------|------|
| **프로젝트 건강 점수** | 0~100 점수, 색상 구분 (70↑ 초록, 40~69 노랑, 40↓ 빨강), 프로그레스 바 |
| **Gate 통과율** | 오늘의 Gate 통과 비율 (%), 오늘 실행 횟수 표시 |
| **AI 비용 (오늘)** | 오늘 발생한 AI 비용 ($), 누적 총 비용 표시 |
| **인덱싱 파일 수** | Vector DB에 인덱싱된 총 파일 수, 오늘 검색 횟수 표시 |

#### 건강 점수 상세 분해
| 항목 | 설명 |
|------|------|
| Gate 통과율 | 전체 Gate 통과 비율 |
| 아키텍처 일관성 | 아키텍처 규칙 준수율 |
| 코드 품질 | 코드 리뷰 품질 점수 |
| 활동 지수 | 팀 활동 빈도 지수 |
| 기술 부채 목록 | 반복 실패 패턴 → 심각도, Gate 번호, 발생 횟수, 개선 제안 |

#### 차트 영역
| 차트 | 설명 |
|------|------|
| **주간 트렌드** (Line) | 최근 7일간 통과/실패 추이 라인 차트 |
| **최근 Gate 결과** (List) | 최근 12건 Gate 결과 목록 (상태 배지 + 시간) |
| **Gate 분포** (Doughnut) | 오늘 Passed / Failed / Warning 비율 도넛 차트 |
| **비용 트렌드** (Bar) | 주간 AI 비용 추이 바 차트 |
| **팀 활동** (List) | 팀원별 온라인 상태, 작업 중 파일 수 |

### 사용법
- 페이지 로드 시 자동으로 데이터를 가져오며, **30초마다 자동 갱신**됩니다.
- 건강 점수의 색상으로 프로젝트 상태를 직관적으로 판단할 수 있습니다.
- 기술 부채 목록에서 반복 실패하는 항목을 확인하고 우선 개선 대상을 식별합니다.

---

## 2. Gate 분석 (Gate Analysis)

**경로**: `/gates`  
**역할**: 6개 Gate 각각의 통과율을 비교 분석하고, 전체 Gate 실행 이력을 조회

### 표시 항목

#### Gate별 통과율 차트 (Bar)
| 항목 | 설명 |
|------|------|
| G1: Syntax | 문법/구조 검사 통과율 |
| G2: Rules | 코딩 규칙 준수 통과율 |
| G3: Integration | 통합 테스트 통과율 |
| G4: Review | 보안/성능 리뷰 통과율 |
| G5: Architecture | 아키텍처 규칙 통과율 |
| G6: Collision | 충돌 감지 통과율 |

> 막대 색상: 80%↑ 초록, 50~79% 노랑, 50%↓ 빨강

#### Gate 실행 이력 테이블
| 열 | 설명 |
|----|------|
| Gate | Gate 번호 (G1~G6) |
| Name | Gate 이름 |
| Status | 상태 배지 (passed/failed/warning) |
| Message | 검증 결과 메시지 |
| Time | 실행 시각 |

### 사용법
- 차트에서 **통과율이 낮은 Gate를 식별**하여 집중 개선합니다.
- 이력 테이블을 스크롤하여 최근 실패 건의 구체적 메시지를 확인합니다.

---

## 3. 파이프라인 (Pipeline)

**경로**: `/pipeline`  
**역할**: 특정 파일에 대해 6-Gate 파이프라인을 직접 실행하고 결과를 실시간 확인

### 표시 항목

#### 입력 영역
| 입력 필드 | 설명 |
|-----------|------|
| **파일 경로** | 검증할 소스 파일의 전체 경로 입력 |
| **작업자** | 작업자 식별자 (Gate 6 충돌 감지용, 선택) |
| **실행 버튼** | 파이프라인 시작 (로딩 스피너 표시) |

#### 실행 결과
| 항목 | 설명 |
|------|------|
| **전체 상태 배지** | passed / failed / warning 중 하나 |
| **Gate 1~6 카드** (6개) | 각 Gate별 이름, 상태 배지, 색상 구분 카드 |
| **상세 정보** | 이슈가 있는 Gate의 detail 메시지 목록 |

### 사용법
1. 검증할 파일의 **전체 경로**를 입력합니다 (예: `c:\project\src\app.py`).
2. 작업자 이름을 입력합니다 (미입력 시 `anonymous`).
3. **실행** 버튼을 클릭하거나 Enter를 누릅니다.
4. Gate 1~6까지 순차 실행되며, 결과가 카드 형태로 표시됩니다.
5. 실패한 Gate의 상세 메시지를 펼쳐서 구체적 문제를 확인합니다.

---

## 4. RAG 검색 (RAG Search)

**경로**: `/search`  
**역할**: Vector DB(ChromaDB)에 인덱싱된 코드베이스에서 시맨틱 검색 수행

### 표시 항목

#### 상단 정보
| 항목 | 설명 |
|------|------|
| **총 청크 수** | Vector DB에 저장된 코드 청크 수 |
| **상태** | DB 연결 상태 (ready 등) |
| **재인덱싱 버튼** | 코드베이스를 다시 인덱싱 |

#### 검색 입력
| 입력 필드 | 설명 |
|-----------|------|
| **검색어** | 자연어 질의 입력 (예: "인증 처리하는 함수") |
| **검색 버튼** | 시맨틱 검색 실행 |

#### 검색 결과
| 항목 | 설명 |
|------|------|
| **파일 경로** | 매칭된 코드가 위치한 파일 |
| **라인 범위** | 시작~끝 줄 번호 |
| **관련성 점수** | 검색어와의 유사도 (0~100%) |
| **코드 미리보기** | 매칭된 코드 블록 (구문 강조) |

### 사용법
1. 검색창에 **찾고 싶은 기능을 자연어로** 입력합니다.
   - 예: "Gate 실패 시 알림 발송", "프로젝트 등록 API"
2. Enter 또는 검색 버튼을 클릭합니다.
3. 결과에서 관련성이 높은 코드를 확인합니다.
4. 코드가 변경되었다면 **재인덱싱** 버튼으로 DB를 업데이트합니다.

---

## 5. 온보딩 (Onboarding)

**경로**: `/onboarding`  
**역할**: 신규 팀원을 위한 프로젝트 Q&A + 아키텍처/모듈 브리핑

### 표시 항목

#### Q&A 섹션
| 항목 | 설명 |
|------|------|
| **질문 입력** | 프로젝트에 대한 질문 입력 |
| **답변** | RAG 기반 자동 답변 (마크다운 렌더링) |
| **코드 참조** | 답변의 근거가 되는 코드 파일, 라인, 관련성 점수 |

#### 아키텍처 브리핑
| 항목 | 설명 |
|------|------|
| **5-Layer 구조도** | L1 Scaffold → L2 RAG → L3 Agent → L4 Collab → L5 Dashboard |
| **핵심 모듈 목록** | 레이어별 모듈 디렉토리와 파일 수 |
| **퀵스타트 가이드** | 환경 설정부터 서버 시작까지 5단계 커맨드 |

### 사용법
1. **Q&A 섹션**에서 프로젝트에 대한 궁금한 점을 질문합니다.
   - 예: "Gate 3이 하는 일은?", "alerts 시스템 구조는?"
2. RAG 검색 기반으로 답변이 생성되며, 출처 코드가 함께 표시됩니다.
3. 하단의 **아키텍처 브리핑**으로 전체 구조를 파악합니다.
4. **퀵스타트**의 커맨드를 순서대로 실행하여 개발 환경을 구축합니다.

---

## 6. 피드백 루프 (Feedback Loop)

**경로**: `/feedback`  
**역할**: Gate 실행 이력을 분석하여 반복 실패 패턴을 식별하고 개선 제안 제공

### 표시 항목

#### 요약 카드 (3개)
| 카드 | 설명 |
|------|------|
| **총 실행 횟수** | 전체 Gate 파이프라인 실행 횟수 |
| **총 실패 횟수** | 실패로 종료된 횟수 |
| **실패율** | 실패 비율 (%, 30%↑ 빨강 / 10~30% 노랑 / 10%↓ 초록) |

#### 분석 차트
| 항목 | 설명 |
|------|------|
| **실패 패턴 차트** (Bar) | Gate별 실패 횟수 분포 바 차트 |
| **실패 사유 목록** | 가장 빈번한 실패 메시지와 발생 횟수 |

#### 개선 제안
| 항목 | 설명 |
|------|------|
| **제안 목록** | 자동 생성된 개선 조치 리스트 (전구 아이콘) |

### 사용법
- 페이지를 열면 전체 Gate 이력을 자동 분석합니다.
- **실패 패턴 차트**에서 어떤 Gate가 가장 많이 실패하는지 확인합니다.
- **실패 사유**에서 반복되는 구체적 문제를 파악합니다.
- **개선 제안**을 참고하여 코드를 수정합니다.

---

## 7. 협업 (Collaboration)

**경로**: `/collab`  
**역할**: 팀원 간 작업 영역(Work Zone) 충돌 방지 + 설계 결정 자동 추출

### 표시 항목

#### Work Zone 섹션
| 항목 | 설명 |
|------|------|
| **작업자** 입력 | 본인 이름 입력 |
| **파일 목록** 입력 | 작업할 파일 경로 (쉼표 구분) |
| **설명** 입력 | 작업 내용 간단 설명 |
| **선언 버튼** | 작업 영역 선언 |
| **충돌 경고** | 다른 팀원이 같은 파일을 작업 중이면 빨간 경고 |
| **활성 Zone 목록** | 현재 선언된 모든 작업 영역 (작업자, 파일, 시각, 해제 버튼) |

#### Decision Extractor 섹션
| 항목 | 설명 |
|------|------|
| **텍스트 입력** | 대화, 코드 리뷰, 미팅 노트 등의 텍스트 |
| **자동 저장** 체크 | ADR(Architecture Decision Record)로 자동 저장 여부 |
| **추출 버튼** | 텍스트에서 설계 결정을 자동 추출 |
| **결과 카드** | 추출된 결정 제목, 내용, 신뢰도, ADR 저장 경로 |

### 사용법

**Work Zone (충돌 방지)**:
1. 작업자 이름과 **작업할 파일 경로를 쉼표로 구분**하여 입력합니다.
2. **선언** 버튼을 클릭합니다.
3. 다른 팀원이 같은 파일을 작업 중이면 **충돌 경고**가 표시됩니다.
4. 작업 완료 후 **해제** 버튼으로 영역을 반환합니다.

**Decision Extractor (결정 추출)**:
1. 대화 내용이나 미팅 노트를 텍스트 영역에 붙여넣습니다.
2. 필요시 **자동 저장** 체크를 켜면 ADR로 자동 기록됩니다.
3. **추출** 버튼을 클릭하면 설계 결정이 구조화되어 표시됩니다.

---

## 8. 의도 메타 (Intent Meta)

**경로**: `/meta`  
**역할**: 코드의 숨겨진 의도(Hidden Intent)를 .meta.json 파일로 관리하고 Vector DB에 인덱싱

### 헤더 영역

| 항목 | 설명 |
|------|------|
| **일괄 분석 버튼** | 프로젝트 전체 소스를 AST로 자동 분석하여 .meta.json 생성 |
| **DB 인덱싱 버튼** | 생성된 모든 .meta.json을 Vector DB에 인덱싱 (RAG 검색 가능) |
| **메타 파일 수** | 현재 생성된 .meta.json 총 개수 |

### 서브 탭 (3개)

| 탭 | 설명 |
|------|------|
| **메타 목록** | 메타 파일 검색, 단일 분석, 수정/삭제 |
| **커버리지** | 소스 파일 대비 메타 보유율 통계 |
| **의존성 그래프** | 파일 간 import 관계 시각화 |

---

#### 탭 1: 메타 목록

| 항목 | 설명 |
|------|------|
| **검색 입력** | 목적, 결정, 의존성 키워드로 메타 파일 필터링 |
| **단일 분석 입력** | 파일 경로를 입력하여 개별 파일의 .meta.json 자동 생성 |
| **메타 파일 목록** | 각 파일별 확장/축소 가능한 카드 (의존성 수 배지 표시) |

##### 메타 파일 상세 (확장 시)
| 필드 | 설명 |
|------|------|
| **목적 (Purpose)** | 해당 코드가 존재하는 이유 |
| **설계 결정 (Decisions)** | 코드에서 추출된 설계 결정 사항 |
| **고려한 대안 (Alternatives)** | 선택하지 않은 대안들 |
| **제약 (Constraints)** | 클래스, public API 등의 구조적 제약 |
| **의존성 (Dependencies)** | import하는 외부/내부 모듈 목록 |
| **작성자 / 생성일** | 메타 파일 생성 정보 |
| **수정 버튼** | 목적, 결정, 대안을 인라인 편집 |
| **삭제 버튼** | 해당 메타 파일 삭제 (확인 다이얼로그 표시) |

---

#### 탭 2: 커버리지

| 항목 | 설명 |
|------|------|
| **커버리지 비율** | 전체 소스 파일 중 메타 보유율 (%) + 프로그레스 바 |
| **소스 파일 수** | 프로젝트 내 총 소스 파일 개수 |
| **보유 수** | 메타 파일이 존재하는 소스 파일 수 |
| **미보유 수** | 메타 파일이 없는 소스 파일 수 |
| **미보유 파일 목록** | 메타가 생성되지 않은 파일명 (최대 20개) |

---

#### 탭 3: 의존성 그래프

| 항목 | 설명 |
|------|------|
| **노드 수** | 의존성 관계에 포함된 파일/모듈 총 수 |
| **연결 수** | 파일 간 import 연결 총 수 |
| **노드 필터** | 특정 파일명으로 노드/엣지 필터링 |
| **노드 목록** | 파일별 목적 설명 + 의존성 수 배지 (3개 초과 시 경고 색상) |
| **연결 테이블** | Source → Target 관계 + 모듈 경로 (최대 100개 표시) |

### 사용법
1. **일괄 분석** 버튼을 클릭하면 `src/` 디렉토리 전체를 자동 분석합니다.
   - Python 파일: AST(Abstract Syntax Tree)로 docstring, import, class/function 추출
   - TypeScript 파일: 정규식으로 주석, import, export 추출
2. **검색 필드**에서 키워드를 입력하여 관련 메타를 빠르게 찾습니다.
3. **단일 분석** 입력에 특정 파일 경로를 넣고 분석 버튼을 누르면 개별 파일만 분석합니다.
4. 메타 카드를 펼쳐 **수정 버튼**으로 목적/결정/대안을 직접 편집합니다.
5. **커버리지 탭**에서 메타 보유율을 확인하고 미보유 파일을 파악합니다.
6. **의존성 그래프 탭**에서 파일 간 import 관계를 확인합니다.
7. **DB 인덱싱** 버튼을 클릭하면 메타 데이터가 Vector DB에 저장됩니다.
8. 이후 RAG 검색 탭에서 "이 코드의 의도가 뭐야?" 같은 질문에 메타 데이터가 검색됩니다.

---

## 9. 프로젝트 (Projects) — Admin/Lead 전용

**경로**: `/projects`  
**역할**: 멀티 프로젝트 등록/관리 + 프로젝트별 팀원 권한 관리

### 표시 항목

#### 집계 카드 (2개)
| 카드 | 설명 |
|------|------|
| **총 프로젝트 수** | 등록된 활성 프로젝트 수 |
| **총 팀원 수** | 전체 프로젝트의 팀원 합계 |

#### 프로젝트 등록 폼 (+ 버튼 클릭 시)
| 입력 필드 | 설명 |
|-----------|------|
| 프로젝트 ID | 고유 식별자 (예: `my-webapp`) |
| 이름 | 프로젝트 표시 이름 |
| 루트 경로 | 프로젝트 디렉토리 전체 경로 |
| 설명 | 프로젝트 설명 |
| 팀원 | 쉼표 구분 사용자 이름 |
| 태그 | 쉼표 구분 태그 |

#### 프로젝트 카드 (각 프로젝트별)
| 항목 | 설명 |
|------|------|
| **이름 / ID** | 프로젝트 식별 정보 |
| **설명** | 프로젝트 설명 텍스트 |
| **건강 점수** | 0~100 프로그레스 바 (색상 구분) |
| **오늘 Gate 실행** | 오늘 실행된 Gate 수 |
| **활성 알림** | 미처리 알림 수 |
| **팀원 수** | 등록된 팀원 수 |
| **태그** | 프로젝트 태그 배지 |
| **비활성화 버튼** | 프로젝트를 비활성 상태로 전환 |

#### 팀원 관리 패널 (확장 시)
| 항목 | 설명 |
|------|------|
| **역할 배지** | Owner(왕관), Maintainer(방패), Developer(렌치), Viewer(눈) |
| **역할 변경** | 드롭다운으로 역할 변경 (Owner/Maintainer만 가능) |
| **멤버 제거** | X 버튼으로 멤버 제거 (Owner 제거 불가) |
| **멤버 추가** | 사용자명 + 역할 선택 후 추가 |

### 프로젝트 역할 권한 체계

| 역할 | 멤버 관리 | Gate 실행 | Gate 바이패스 | Zone 강제 해제 | 대시보드 쓰기 |
|------|-----------|-----------|---------------|----------------|---------------|
| **Owner** | O | O | O | O | O |
| **Maintainer** | O | O | O | O | O |
| **Developer** | X | O | X | X | X |
| **Viewer** | X | X | X | X | X |

### 사용법
1. 우측 상단 **+ 프로젝트 추가** 버튼으로 새 프로젝트를 등록합니다.
2. 각 프로젝트 카드에서 **건강 점수, 알림, Gate 실행 현황**을 확인합니다.
3. 카드 하단의 **멤버** 버튼을 클릭하여 팀원 관리 패널을 엽니다.
4. **멤버 추가**: 사용자명과 역할을 선택하여 팀원을 추가합니다.
5. **역할 변경**: 기존 멤버의 역할을 드롭다운으로 변경합니다.
6. **멤버 제거**: X 버튼으로 멤버를 제거합니다 (Owner는 제거 불가).

---

## 10. 관리자 (Admin) — Admin/Lead 전용

**경로**: `/admin`  
**역할**: 전역 사용자 계정 생성, 역할 변경, 비활성화, 비밀번호 초기화 등 관리

### 표시 항목

#### 사용자 추가 폼 (+ 버튼 클릭 시)
| 입력 필드 | 설명 |
|-----------|------|
| Username | 로그인 ID |
| Password | 비밀번호 |
| Display Name | 표시 이름 |
| Email | 이메일 주소 |
| Role | admin / lead / developer / viewer 선택 |

#### 사용자 목록 테이블
| 열 | 설명 |
|----|------|
| **Username** | 로그인 ID |
| **Display Name** | 표시 이름 |
| **Role** | 역할 배지 (Admin만 변경 가능, 드롭다운) |
| **Status** | 활성/비활성 상태 (초록/회색 점) |
| **Last Login** | 마지막 로그인 일시 |
| **Actions** | 활성화/비활성화, 비밀번호 초기화, 삭제 버튼 |

### 전역 역할 체계

| 역할 | 설명 | 주요 권한 |
|------|------|-----------|
| **Admin** | 최고 관리자 | 모든 권한 (사용자 관리, Gate 바이패스, 설정 변경) |
| **Lead** | 팀 리더 | 사용자 생성(Admin 제외), Zone 강제 해제, Gate 바이패스 |
| **Developer** | 개발자 | Gate 실행, Zone 선언/해제, 검색, 알림 확인 |
| **Viewer** | 열람자 | 대시보드 읽기 전용 |

### 사용법
1. **사용자 추가** 버튼으로 새 계정을 생성합니다.
2. 테이블에서 **역할 드롭다운**을 변경하여 권한을 조정합니다 (Admin만 가능).
3. **전원 아이콘**으로 사용자를 활성화/비활성화합니다.
4. **시계 아이콘**으로 비밀번호를 초기화합니다 (Admin만 가능).
5. **휴지통 아이콘**으로 사용자를 삭제합니다 (Admin만 가능, `admin` 계정 삭제 불가).

---

## 공통 기능

### 헤더 영역
| 항목 | 설명 |
|------|------|
| **VIBE-X 로고** | 좌측 상단 VX 그라디언트 로고 |
| **WebSocket 상태** | 실시간 연결 상태 표시 (connected/disconnected) |
| **언어 전환** | 한국어 ↔ English 토글 |
| **사용자 정보** | 현재 로그인한 사용자명 + 역할 |
| **로그아웃** | 로그아웃 버튼 |

### 알림 바
- Gate 실패, 임계치 초과 등의 이벤트 발생 시 **탭 바 아래에 알림 배너**가 표시됩니다.
- **모두 해제** 버튼으로 알림을 일괄 닫을 수 있습니다.

### 실시간 업데이트
- WebSocket을 통해 Gate 실행 결과, 알림이 **실시간으로 푸시**됩니다.
- 개요 페이지는 **30초마다 자동 갱신**됩니다.

---

## 빠른 시작 가이드

```bash
# 1. 백엔드 서버 시작
cd vibe-x
pip install -r requirements.txt
uvicorn src.layer5_dashboard.app:app --reload --port 8000

# 2. 프론트엔드 대시보드 시작
cd dashboard
npm install
npm run dev

# 3. 브라우저에서 접속
# http://localhost:3000
# 기본 계정: admin / admin1234

# 4. Docker Compose로 한번에 시작
docker compose up -d
# http://localhost:3000
```
